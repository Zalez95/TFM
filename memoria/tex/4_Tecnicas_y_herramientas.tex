\capitulo{4}{Técnicas y herramientas}

% Esta parte de la memoria tiene como objetivo presentar las técnicas metodológicas y las herramientas de desarrollo que se han utilizado para llevar a cabo el proyecto. Si se han estudiado diferentes alternativas de metodologías, herramientas, bibliotecas se puede hacer un resumen de los aspectos más destacados de cada alternativa, incluyendo comparativas entre las distintas opciones y una justificación de las elecciones realizadas. 
% No se pretende que este apartado se convierta en un capítulo de un libro dedicado a cada una de las alternativas, sino comentar los aspectos más destacados de cada opción, con un repaso somero a los fundamentos esenciales y referencias bibliográficas para que el lector pueda ampliar su conocimiento sobre el tema.

Este apartado tiene el objetivo de enumerar y describir las múltiples herramientas utilizadas para el desarrollo del presente proyecto.\\

Durante la fase inicial se trató de llevar a cabo una prueba de concepto empleando el lenguaje de programación Python para comprobar la viabilidad de la idea y la dificultad de implementación de descarga de datos y el posterior proceso de análisis de sentimientos. La decisión de usar este lenguaje de programación se basa en que es un lenguaje que conozco ya que he trabajado con éste en el pasado, y que considero sencillo y especialmente útil para llevar a cabo prototipos de forma rápida, ya que al ser muy popular actualmente, es muy fácil encontrar librerías y recursos en la web en caso de duda.\\

El primer paso que se llevo a cabo para esta prueba de concepto fue investigar las posibles herramientas para llevar a cabo la descarga de datos de la página web de instagram. Tras hacer varias pruebas con múltiples crawlers encontrados en GitHub se decidió emplear Instalooter, el cual dispone de una API para Python además de un cliente de línea de comandos. El resto de crawlers encontrados no parecían funcionar, posiblemente porque la web de Instagram haya cambiado recientemente y éstos no hayan sido actualizados de acorde a estos cambios en el momento en que hice la prueba. La API de Instalooter pone a disposición del usuario de varios \textit{looters} ya sea para descargar las publicaciones llevadas a cabo por un usuario en su perfil o para descargar publicaciones relacionadas con un Hashtag, y permite descargar tanto las imágenes como la descripción y metadatos de las mismas en formato JSON. Además, antes de descargar la información de una publicación Instalooter comprueba que no haya sido ya descargada, con lo que puede ejecutarse repetidamente sobre un perfil o un Hashtag sin peligro de obtener resultados duplicados.\\

Respecto al procesamiento de los datos descargados de estas publicaciones, inicialmente se trató de utilizar la API de Google Cloud Vision debido su facilidad de uso y las ventajas que otorga usar la computación en la nube. Específicamente se escogió esta plataforma por recomendación del tutor. Esta plataforma de Google Cloud provee múltiples servicios junto con sus respectivas APIs, entre los que cabe destacar almacenamiento en la nube con Cloud Storage, servicios de procesamiento de datos y máquinas virtuales con Compute Engine, procesamiento de imágenes mediante Cloud Vision, almacenamiento de bases de datos en Cloud SQL, etc. Todos estos servicios se pueden probar de forma gratuita con tan solo crearse una cuenta en la plataforma. Esto es debido a  que Google ofrece 300 USD para invertir libremente a toda cuenta recién creada durante un periodo de 3 meses, 400 USD si demuestras que eres un alumno. Este crédito inicial se va gastando según se vaya haciendo uso de los servicios, y una vez consumido o pasado el periodo de 3 meses, Google empieza a cobrar por el uso de los mismo. Como por ahora solo se trata de una prueba de concepto, este límite de dinero no es preocupante, aunque el de tiempo si que puede llegar a serlo.\\

Como se ha comentado anteriormente, para emplear los servicios de Google Cloud, Google pone a disposición de los usuarios APIs de forma gratuita para distintos lenguajes de programación. En el caso de la API de Cloud Vision, la documentación para el lenguage de programación Python se puede encontrar en el siguiente link \url{https://googleapis.dev/python/vision/latest/index.html}.\\

Tras las pruebas iniciales se pudo comprobar que la información que se puede obtener del uso de la API de Google Cloud Vision si que incluye cierta capacidad de análisis de sentimiento, permitiendo obtener tags como Joy, Sorrow, Anger, Surprise, etc. junto con su likelihood, pero no incluye información como edad y género de las personas, parece ser que eliminaron esta capacidad por motivos éticos hace no mucho \url{https://web.archive.org/web/20200902214144/https://diversity.google/story/ethics-in-action-removing-gender-labels-from-clouds-vision-api/}. Esto es un problema ya que se pretendía hacer uso de este tipo de información a la hora de recomendar publicaciones o lugares al usuario. Debido a esto se decidió comparar las alternativas existente a la API de Google.\\

A continuación se hace un pequeño resumen de los servicios ofrecidos por las alternativas valoradas y que posiblemente se puedan llegar a necesitar en el proyecto.

\begin{landscape}
\begin{table}[]
\resizebox{1.02\columnwidth}{0.55\textwidth}{%
\begin{tabular}{|p{0.12\textwidth}|p{0.2\textwidth}|p{0.15\textwidth}|p{0.15\textwidth}|p{0.15\textwidth}|p{0.21\textwidth}|p{0.21\textwidth}|p{0.21\textwidth}|p{0.21\textwidth}|}
\hline
\multirow{2}{=}{Servicios} & \multirow{2}{=}{Límite de uso}	& \multicolumn{3}{|c|}{API de Visión Artificial}	& \multirow{2}{=}{Almacenamiento en bucket/blobs gratuito}	& \multirow{2}{=}{Almacenamiento en Base de Datos SQL}	& \multirow{2}{=}{Almacenamiento en Base de Datos NoSQL}	& \multirow{2}{=}{Máquinas Virtuales}	\\ \cline{3-5}
	&	& Límite de uso	& Análisis de Sentimiento	& Reconoci\-miento de edad y género &	&	&	&	\\ \hline
Google Cloud	& 300 USD durante 3 meses	& 1000 unidades al mes	& Si, con tags alegría, tristeza, enojo, sorpresa	& No	& Si, con 5 Gbs al mes en Google Cloud Storage	& Si, con motor de base de datos MySQL, PostgreSQL y SQL Server	& Si, bases de datos documentales como Cloud Datastore, Cloud Firestore... y clave/valor con MongoDB, Bigtable...	& Si, Máquina virtual en Compute Engine empleando el saldo inicial	\\ \hline
Microsoft Azure	& 12 meses para servicios gratuitos + 200 USD para servicios no gratuitos durante 1 mes & Hasta 30.000 transacciones al mes & Si, con tags felicidad, tristeza, neutralidad, ira, desprecio, asco, sorpresa y temor	& Si	& Si, con 5 Gbs en Azure Blob Storage y 5 GBs en Azure File Storage 5 & Si, con Azure Database for MySQL (750 horas al mes), Azure Database for PostgreSQL (750 horas al mes) y SQL Database (250 Gbs)	& Si, Azure Cosmos DB (25 Gbs)	& Si, Máquina virtual B1S (1 núcleo, 1 GB RAM y 4GB de almacenamiento) con Linux 750 horas al mes	\\ \hline
Amazon Web Services (AWS)	& 12 meses para la capa gratuita	& 5000 imágenes al mes	& Si, con tags feliz, triste, enfado, confuso, disgustado, sorprendido, calma, miedo, desconocido & Si	& Si, con 5 Gbs al mes en Amazon S3	& Si, se puede usar RDS (750 horas al mes) con motor de base de datos MySQL, MariaDB, Oracle, PostgreSQL, SQL Server y Amazon Aurora & Si, bases de datos documentales con DocumentDB (compatible con MongoDB, solo 1 mes de prueba) y clave/valor con DynamoDB (25 GB gratuitos) & Si, Máquina virtual en EC2 (1 CPU, 1GB de RAM, 1 CPU y 1GB de RAM, 30 GBs SSD) con Linux 750 horas al mes \\ \hline
\end{tabular}%
}
\end{table}
\end{landscape}

Cabe destacar que se intentó llevar a cabo pruebas en las distintas plataformas, y con los servicios de Microsoft Azure no se consiguió llegar a crear una máquina virtual de tipo B1S gratuita, siempre salían como no disponibles. Tras revisar la página de Q&A de Microsoft parece que a mucha gente le ha sucedido lo mismo, el problema parece ser la alta demanda de este tipo de máquinas. Debido a este problema se decidió que lo mejor era emplear los servicios de Amazon Web Services.\\

Además de las anteriores herramientas utilizadas para la descarga, almacenamiento y procesamiento de datos, se han utilizados otras herramientas y utilidades para llevar a cabo tanto la implementación de los programas como la realización de la memoria, entre las que cabe destacar:

\begin{itemize}
    \item virtualenv: herramienta empleada en Python para crear entornos aislados, evitando que las actualizaciones e instalaciones llevadas a cabo para otros proyectos afecten al actual.
    \item Visual Studio Code: editor de código fuente usado para la implementación de los scripts.
    \item Git: Sistema de Control de Versiones empleado tanto con el código como con la memoria del proyecto. El repositorio se decidió almacenar en la forja GitHub para poder compartirlo fácilmente con el tutor, y además para poder acceder a sus herramientas de seguimiento del proyecto.
    \item \LaTeX: Sistema de composición de textos de alta calidad empleado para la creación de la memoria. LaTeX se usó junto con la web Overleaf, ya que ésta evita tener que instalar todo el entorno de compilación de LaTeX junto con sus dependencias, y además permite sincronizar los cambios con GitHub fácilmente.
\end{itemize}
